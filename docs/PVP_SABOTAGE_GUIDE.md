# ğŸ”¥ SystÃ¨me PvP de Sabotage - Guide Complet

Le systÃ¨me de sabotage PvP permet aux joueurs de s'attaquer mutuellement pour perturber leurs opÃ©rations de minage et voler des ressources. Ce systÃ¨me s'appuie sur des cartes d'attaque et de dÃ©fense obtenues via des missions clandestines et un marchÃ© noir.

## ğŸ“‹ Vue d'Ensemble du SystÃ¨me

### ğŸ¯ Objectifs
- **CompÃ©tition**: Ajout d'un Ã©lÃ©ment compÃ©titif direct entre joueurs
- **StratÃ©gie**: Ã‰quilibrage entre attaque, dÃ©fense et ressources
- **Progression**: Nouvelles mÃ©thodes d'acquisition de cartes rares
- **Immersion**: Univers clandestin du minage de tokens $7N1

### ğŸ”„ Boucle de Gameplay
1. **Obtenir des cartes** via missions ou marchÃ© noir
2. **Planifier ses attaques** en ciblant les joueurs vulnÃ©rables  
3. **Se dÃ©fendre** en activant les bonnes protections
4. **GÃ©rer les ressources** (Ã©nergie, tokens, fragments)

## âš”ï¸ SystÃ¨me d'Attaque

### Types d'Attaques Disponibles

| Type | Effet | DurÃ©e | CoÃ»t | DÃ©tection | Contre |
|------|-------|-------|------|-----------|--------|
| ğŸ¦  **Virus Z3-Miner** | -50% hashrate | 2h | 1 carte virus | Moyenne | Antivirus |
| âš¡ **Blackout CiblÃ©** | Pause mining | 20min | 1 gÃ©nÃ©rateur | Haute | GÃ©nÃ©rateur secours |
| ğŸ”§ **Recalibrage ForcÃ©** | -25% efficacitÃ© | 1h | 80 Ã©nergie | Basse | Logiciel optimisation |
| ğŸŒ **DÃ©tournement DNS** | Vol 10% hashrate | 3h | 1 token rare | Faible | VPN + Firewall |
| ğŸ’° **Vol Brutal** | Vol 5% tokens | InstantanÃ© | 1 carte vol | TrÃ¨s haute | Aucune |

### ğŸ“œ Commande `/sabotage`
```
/sabotage @joueur [type]
```

**RÃ¨gles d'attaque:**
- â° **Cooldown**: 3h entre les attaques
- ğŸ›¡ï¸ **ImmunitÃ©**: 20min post-attaque pour la cible
- ğŸ“ **ActivitÃ©**: Cible doit Ãªtre active (<48h)
- ğŸš« **Limite**: Max 1 attaque par cible toutes les 15min

## ğŸ›¡ï¸ SystÃ¨me de DÃ©fense

### Types de DÃ©fenses

| DÃ©fense | Effet | Type |
|---------|-------|------|
| ğŸ¦  **Antivirus** | Bloque tous les virus | Permanent |
| âš¡ **GÃ©nÃ©rateur Secours** | EmpÃªche les blackouts | Ã€ usage unique |
| ğŸ”§ **Logiciel Optimisation** | RÃ©duit durÃ©e malus 50% | Permanent |
| ğŸŒ **VPN + Firewall** | 50% Ã©viter attaques rÃ©seau | Permanent |
| ğŸ” **DÃ©tecteur Sabotage** | RÃ©vÃ¨le l'attaquant | Temporaire |

### ğŸ“œ Commande `/defense`
```
/defense [action]
```

**Actions disponibles:**
- `view`: Voir ses dÃ©fenses actuelles
- `toggle`: Activer/dÃ©sactiver une dÃ©fense
- `recycle`: Recycler une carte pour des fragments

## ğŸ•µï¸ Missions Clandestines

### Types de Missions

| Mission | DifficultÃ© | CoÃ»t | SuccÃ¨s | Cooldown | RÃ©compenses |
|---------|------------|------|--------|----------|-------------|
| ğŸ­ **Infiltration Ferme** | â­â­ | 40 Ã©nergie | 70% | 6h | Cartes communes, fragments |
| ğŸ¢ **Piratage EntrepÃ´t** | â­â­â­ | 60 Ã©nergie | 60% | 8h | Cartes rares, 25 tokens |
| ğŸ“‹ **Vol de Plans** | â­â­â­â­ | 80 Ã©nergie | 50% | 12h | Cartes Ã©piques, 50 tokens |
| ğŸ’¥ **Sabotage Concurrent** | â­â­â­â­â­ | 100 Ã©nergie | 35% | 24h | Cartes lÃ©gendaires, 100 tokens |
| ğŸ’¾ **RÃ©cupÃ©ration DonnÃ©es** | â­â­â­ | 50 Ã©nergie | 65% | 6h | Fragments mixtes, 30 tokens |

### ğŸ“œ Commande `/mission`
```
/mission [type]
```

**Bonus de niveau:**
- +2% de succÃ¨s par niveau au-delÃ  de 1
- RÃ©cits narratifs immersifs selon le rÃ©sultat

## ğŸ”¨ SystÃ¨me de Craft

### Recettes de Craft

| Recette | CoÃ»t | RÃ©sultats Possibles |
|---------|------|---------------------|
| âš”ï¸ **Carte Attaque** | 5 fragments attaque | 40% Common, 30% Common, 20% Uncommon, 8% Rare, 2% Epic |
| ğŸ›¡ï¸ **Carte DÃ©fense** | 5 fragments dÃ©fense | 40% Common, 30% Common, 20% Uncommon, 8% Rare, 2% Epic |

### ğŸ“œ Commande `/craft`
```
/craft [type]
```

**Recyclage des cartes:**
- âšª Common: 2 fragments
- ğŸŸ¢ Uncommon: 3 fragments  
- ğŸ”µ Rare: 5 fragments
- ğŸŸ£ Epic: 8 fragments
- ğŸŸ¡ Legendary: 12 fragments

## ğŸ•´ï¸ MarchÃ© Noir

### Fonctionnement
- **Refresh**: Toutes les 12h automatiquement
- **Offres**: 3 cartes alÃ©atoires par cycle
- **Limite**: 1 achat par joueur par cycle
- **Prix**: Fluctue selon raretÃ© et demande (10-1000 $7N1)

### ğŸ“œ Commande `/marche_noir`
```
/marche_noir [action]
```

**Actions disponibles:**
- `view`: Voir les offres actuelles (dÃ©faut)
- `stats`: Statistiques du marchÃ©
- `history`: Votre historique d'achats

### Prix Indicatifs

| RaretÃ© | Prix Min | Prix Max |
|--------|----------|----------|
| âšª Common | 10 $7N1 | 25 $7N1 |
| ğŸŸ¢ Uncommon | 30 $7N1 | 60 $7N1 |
| ğŸ”µ Rare | 80 $7N1 | 150 $7N1 |
| ğŸŸ£ Epic | 200 $7N1 | 400 $7N1 |
| ğŸŸ¡ Legendary | 500 $7N1 | 1000 $7N1 |

## ğŸ“œ Historique et Logs

### ğŸ“œ Commande `/mes_logs`
```
/mes_logs [limite]
```

**Affiche:**
- Attaques donnÃ©es et reÃ§ues
- SuccÃ¨s/Ã©checs des actions
- IdentitÃ© des attaquants (si dÃ©tectÃ©s)
- DÃ©gÃ¢ts et durÃ©es des effets
- Statistiques globales

## âš¡ SystÃ¨me d'Ã‰nergie

### Gestion de l'Ã‰nergie
- **Maximum**: 100 points
- **RÃ©gÃ©nÃ©ration**: +1 point par heure
- **Usage**: Missions clandestines et certaines attaques
- **RÃ©cupÃ©ration**: Certaines rÃ©compenses de missions

### CoÃ»ts Ã‰nergÃ©tiques
- ğŸ”§ Recalibrage ForcÃ©: 80 Ã©nergie
- ğŸ­ Infiltration Ferme: 40 Ã©nergie
- ğŸ¢ Piratage EntrepÃ´t: 60 Ã©nergie
- ğŸ“‹ Vol de Plans: 80 Ã©nergie
- ğŸ’¥ Sabotage Concurrent: 100 Ã©nergie
- ğŸ’¾ RÃ©cupÃ©ration DonnÃ©es: 50 Ã©nergie

## ğŸ› ï¸ Architecture Technique

### Services ImplÃ©mentÃ©s

#### SabotageService
- Gestion des attaques PvP
- VÃ©rification des cooldowns et immunitÃ©s
- Application des effets de sabotage
- Nettoyage automatique des effets expirÃ©s

#### CardService  
- SystÃ¨me de missions clandestines
- Craft et recyclage des cartes
- Gestion de l'inventaire
- RÃ©gÃ©nÃ©ration d'Ã©nergie

#### BlackMarketService
- Refresh automatique du marchÃ©
- Gestion des achats et stock
- Statistiques et historique
- Nettoyage des anciennes donnÃ©es

### Commandes Discord
- `/sabotage` - Attaques PvP
- `/mission` - Missions clandestines
- `/craft` - Craft de cartes
- `/defense` - Gestion des dÃ©fenses
- `/marche_noir` - MarchÃ© noir
- `/mes_logs` - Historique des actions

### Base de DonnÃ©es
- **Tables**: 9 nouvelles tables pour le systÃ¨me PvP
- **Enums**: Types d'attaques, dÃ©fenses, raretÃ©s, missions
- **Relations**: Liens utilisateurs, cartes, actions
- **Index**: Optimisation des requÃªtes frÃ©quentes

## ğŸš€ Installation et Configuration

### 1. Migration Base de DonnÃ©es
```bash
npx prisma migrate deploy
npx prisma generate
```

### 2. Variables d'Environnement
Aucune nouvelle variable requise - utilise la config existante.

### 3. DÃ©ploiement
```bash
npm run build
npm start
```

### 4. TÃ¢ches Automatiques
- **Nettoyage sabotages**: Toutes les 5 minutes
- **Refresh marchÃ© noir**: Toutes les heures (si nÃ©cessaire)
- **RÃ©gÃ©nÃ©ration Ã©nergie**: Toutes les heures
- **Nettoyage gÃ©nÃ©ral**: Une fois par jour

## ğŸ® Guide StratÃ©gique

### Pour les Attaquants
1. **Reconnaissance**: VÃ©rifiez l'activitÃ© et les dÃ©fenses des cibles
2. **Timing**: Attaquez quand les dÃ©fenses sont faibles
3. **Ressources**: GÃ©rez votre Ã©nergie et vos cartes
4. **Diversification**: Variez les types d'attaques

### Pour les DÃ©fenseurs
1. **DÃ©fenses actives**: Activez les bonnes protections
2. **DÃ©tection**: Utilisez les dÃ©tecteurs pour identifier les attaquants
3. **RÃ©cupÃ©ration**: Planifiez vos missions pendant les immunitÃ©s
4. **Contre-attaque**: Ripostez stratÃ©giquement

### Conseils Ã‰conomiques
1. **Missions rÃ©guliÃ¨res**: Source principale de cartes
2. **MarchÃ© noir**: Pour les cartes spÃ©cifiques
3. **Craft intelligent**: Recyclage selon les besoins
4. **Gestion Ã©nergie**: Planifiez vos activitÃ©s

## ğŸ”„ Ã‰volutions Futures

### Extensions Possibles
- **Alliances**: SystÃ¨mes de clans et coopÃ©ration
- **Territoires**: ContrÃ´le de zones de minage
- **Ã‰vÃ©nements**: Sabotages spÃ©ciaux et rÃ©compenses
- **Classements**: Leaderboards des saboteurs
- **NFTs**: Cartes uniques on-chain

### Ã‰quilibrage
- Ajustement des taux de succÃ¨s selon les statistiques
- Nouveaux types d'attaques et dÃ©fenses
- Ã‰vÃ©nements saisonniers avec modificateurs
- SystÃ¨me de rÃ©putation des joueurs

---

## ğŸ“ Support

Pour tout problÃ¨me ou suggestion concernant le systÃ¨me PvP:
1. VÃ©rifiez les logs avec `/mes_logs`
2. Consultez votre inventaire avec `/defense`
3. Regardez l'Ã©tat du marchÃ© avec `/marche_noir stats`
4. Contactez les administrateurs si nÃ©cessaire

**Le systÃ¨me de sabotage PvP est maintenant prÃªt Ã  transformer Marmotte Mining en un vÃ©ritable univers de compÃ©tition clandestine !** ğŸ”¥